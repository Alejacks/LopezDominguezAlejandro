<div class="card shadow-lg p-4 bg-white rounded">
    <h4 class="text-center text-secondary mb-4">Formulario de Pago</h4>

    <div *ngIf="validationErrors().length > 0" class="alert alert-danger">
        <ul class="mb-0">
            <li *ngFor="let error of validationErrors()">{{ error }}</li>
        </ul>
    </div>

    <form> 
        <div class="mb-3">
            <app-input-label for="deliveryTime" labelText="Hora de Entrega (HH:MM)"></app-input-label>
            <input 
                type="time" 
                class="form-control" 
                [value]="deliveryTime()" 
                (input)="updateDeliveryTime($event)" 
                id="deliveryTime"
            >
        </div>

        <div class="mb-3">
            <app-input-label for="address" labelText="Dirección Completa de Reparto"></app-input-label>
            <textarea 
                class="form-control" 
                id="address" 
                rows="3" 
                [value]="address()" 
                (input)="updateAddress($event)"
            ></textarea>
        </div>

        <div class="mb-3" id="paymentMethodGroup">
            <app-input-label for="paymentMethodGroup" labelText="Método de Pago"></app-input-label>

            <div class="row mb-2 align-items-center">
                
                <div class="col-auto">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="paymentMethod" id="radioCard" value="card"
                            [checked]="paymentMethod() === 'card'" (change)="updatePaymentMethod('card')">
                        <label class="form-check-label" for="radioCard">Tarjeta</label>
                    </div>
                </div>
                
                <div class="col">
                    <ng-container *ngIf="paymentMethod() === 'card'; else inactiveCardInput">
                        <app-input-field 
                            [type]="'text'" 
                            [placeholder]="'Número de Tarjeta (16 dígitos)'" 
                            [value]="paymentInfo()"
                            (valueChange)="updatePaymentInfo($event)" 
                            [id]="'cardNumber'"
                        ></app-input-field>
                    </ng-container>
                    <ng-template #inactiveCardInput>
                        <input type="text" class="form-control" placeholder="Número Tarjeta" disabled>
                    </ng-template>
                </div>
            </div>

            <div class="row align-items-center">
                
                <div class="col-auto">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="paymentMethod" id="radioBizum" value="bizum"
                            [checked]="paymentMethod() === 'bizum'" (change)="updatePaymentMethod('bizum')">
                        <label class="form-check-label" for="radioBizum">Bizum</label>
                    </div>
                </div>
                
                <div class="col">
                    <ng-container *ngIf="paymentMethod() === 'bizum'; else inactiveBizumInput">
                        <app-input-field 
                            [type]="'tel'" 
                            [placeholder]="'Número de Teléfono (9 dígitos)'" 
                            [value]="paymentInfo()"
                            (valueChange)="updatePaymentInfo($event)" 
                            [id]="'bizumPhone'"
                        ></app-input-field>
                    </ng-container>
                    <ng-template #inactiveBizumInput>
                        <input type="text" class="form-control" placeholder="Número Teléfono" disabled>
                    </ng-template>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-between mt-4">
            <app-button [text]="'PAGAR'" [classList]="'btn-success w-100 me-2'" (onClick)="onSubmit()"></app-button>

            <app-button [text]="'LIMPIAR'" [classList]="'btn-danger w-100'" (onClick)="handleClear()">
            </app-button>
        </div>
    </form>
</div>